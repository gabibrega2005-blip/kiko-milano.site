<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="vite.svg.html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiko Milano — Maquiagem e Skincare | Frete grátis a partir de R$180</title>
    <meta name="description" content="Kiko Milano: Maquiagem, skincare e acessórios de beleza. Descubra as últimas tendências e produtos inovadores.">
    <meta name="keywords" content="maquiagem, skincare, beleza, cosméticos, batom, base, rímel, paleta de sombras, pincéis de maquiagem">
    <meta property="og:title" content="Kiko Milano — Maquiagem e Skincare">
    <meta property="og:description" content="Kiko Milano: Maquiagem, skincare e acessórios de beleza. Descubra as últimas tendências e produtos inovadores.">
    <meta property="og:type" content="website">
    
    <!-- Google Fonts - Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="css2?family=Montserrat:wght@300;700&display=swap" rel="stylesheet">
    
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1117613160187735');
    fbq('track', 'PageView');
    </script>
    <!-- End Meta Pixel Code -->
    
    <!-- Meta Pixel Tracking Helper -->
    <script>
    /**
     * Meta Pixel Tracking Helper
     * Captura FBC, FBP e Event Source URL para enviar ao backend
     */
    (function() {
      'use strict';
      
      // Função para obter cookie por nome
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
      }
      
      // Função para obter FBC (Facebook Click ID)
      function getFbc() {
        // Primeiro, tentar obter do cookie _fbc
        const fbcCookie = getCookie('_fbc');
        if (fbcCookie) {
          return fbcCookie;
        }
        
        // Se não existir, tentar obter do parâmetro fbclid na URL
        const urlParams = new URLSearchParams(window.location.search);
        const fbclid = urlParams.get('fbclid');
        
        if (fbclid) {
          // Formato: fb.1.{timestamp}.{fbclid}
          const fbc = `fb.1.${Date.now()}.${fbclid}`;
          
          // Salvar no cookie (expira em 90 dias)
          const expires = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toUTCString();
          document.cookie = `_fbc=${fbc}; expires=${expires}; path=/; domain=${window.location.hostname}`;
          
          return fbc;
        }
        
        return null;
      }
      
      // Função para obter FBP (Facebook Browser ID)
      function getFbp() {
        // Tentar obter do cookie _fbp
        const fbpCookie = getCookie('_fbp');
        if (fbpCookie) {
          return fbpCookie;
        }
        
        // Se não existir, criar um novo
        // Formato: fb.1.{timestamp}.{random}
        const fbp = `fb.1.${Date.now()}.${Math.random().toString(36).substring(2, 11)}`;
        
        // Salvar no cookie (expira em 90 dias)
        const expires = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toUTCString();
        document.cookie = `_fbp=${fbp}; expires=${expires}; path=/; domain=${window.location.hostname}`;
        
        return fbp;
      }
      
      // Interceptar fetch para adicionar dados do Meta Pixel
      const originalFetch = window.fetch;
      
      window.fetch = function(...args) {
        const [url, options = {}] = args;
        
        // Verificar se é uma requisição para criar transação
        if (url.includes('/api/transactions') && options.method === 'POST') {
          try {
            // Parse do body
            let body = options.body;
            if (typeof body === 'string') {
              body = JSON.parse(body);
            }
            
            // Adicionar dados do Meta Pixel ao metadata
            if (!body.metadata) {
              body.metadata = {};
            }
            
            body.metadata.fbc = getFbc();
            body.metadata.fbp = getFbp();
            body.metadata.event_source_url = window.location.href;
            
            // Atualizar options
            options.body = JSON.stringify(body);
            
            console.log('✅ [Meta Pixel] Dados adicionados ao metadata:', {
              fbc: body.metadata.fbc,
              fbp: body.metadata.fbp,
              event_source_url: body.metadata.event_source_url
            });
            
          } catch (error) {
            console.error('❌ [Meta Pixel] Erro ao adicionar dados:', error);
          }
        }
        
        return originalFetch.apply(this, [url, options]);
      };
      
      // Log inicial
      console.log('✅ [Meta Pixel] Tracking Helper carregado');
      console.log('FBC:', getFbc());
      console.log('FBP:', getFbp());
      
    })();
    </script>
    <!-- End Meta Pixel Tracking Helper -->
    
    <!-- Otimizey UTM Tracking Script -->
    <script src="scripts-utm-otimizey.js" async="" defer=""></script>
    <!-- End Otimizey Tracking -->
    
    <!-- Otimizey Tracking Script 2 -->
    <script src="api/tracking/script/yGiTNJ5bno87APwJF3m90n0rapR8mi56.js" async=""></script>
    <!-- End Otimizey Tracking 2 -->
    <script type="module" crossorigin="" src="assets/index-BA0TMF1n-v2.js"></script>
    <link rel="stylesheet" crossorigin="" href="assets/index-DjIExPAr.css">
    
    <!-- Script para reorganizar modal PIX -->
    <!-- Script para reorganizar modal PIX -->
    <script>
// Script para reorganizar modal PIX - Versão 5 (Simplificada)
document.addEventListener('DOMContentLoaded', function() {
  'use strict';
  
  function reorganizarModalPix() {
    const canvas = document.querySelector('canvas');
    if (!canvas) return false;
    
    console.log('🎯 Canvas encontrado!');
    
    // Pegar o container pai do canvas
    let container = canvas.parentElement;
    
    // Subir 2 níveis para pegar o container principal
    if (container) container = container.parentElement;
    if (container) container = container.parentElement;
    
    if (!container) {
      console.log('❌ Container não encontrado');
      return false;
    }
    
    console.log('📦 Container encontrado:', container);
    console.log('📋 Filhos do container:', container.children.length);
    
    // Aplicar flexbox no container
    container.style.display = 'flex';
    container.style.flexDirection = 'column';
    container.style.alignItems = 'center';
    
    // Pegar todos os filhos
    const children = Array.from(container.children);
    
    // Logar todos os elementos para debug
    children.forEach((child, index) => {
      console.log('Elemento ' + index + ':', child.tagName, child.className, child.textContent ? child.textContent.substring(0, 50) : '');
    });
    
    // Encontrar o índice do elemento que contém o canvas
    let canvasParentIndex = -1;
    children.forEach((child, index) => {
      if (child.contains(canvas)) {
        canvasParentIndex = index;
      }
    });
    
    console.log('📍 Índice do elemento com canvas:', canvasParentIndex);
    
    if (canvasParentIndex === -1) {
      console.log('❌ Não encontrou o elemento com canvas');
      return false;
    }
    
    // Reorganizar: colocar o elemento com canvas no final (antes do último)
    // Assumindo que o último elemento é o botão "Fechar"
    children.forEach((child, index) => {
      if (index < canvasParentIndex) {
        // Elementos antes do canvas: manter ordem
        child.style.order = index.toString();
      } else if (index === canvasParentIndex) {
        // Canvas: mover para perto do final
        child.style.order = (children.length - 2).toString();
        child.style.marginTop = '20px';
      } else if (index === children.length - 1) {
        // Último elemento (botão Fechar): manter no final
        child.style.order = (children.length - 1).toString();
      } else {
        // Elementos entre canvas e final: mover para cima
        child.style.order = (index - 1).toString();
      }
    });
    
    console.log('✅ Modal PIX reorganizado!');
    return true;
  }
  
  const observer = new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.addedNodes.length > 0) {
        setTimeout(() => {
          if (reorganizarModalPix()) {
            observer.disconnect();
            setTimeout(() => {
              observer.observe(document.body, { childList: true, subtree: true });
            }, 2000);
          }
        }, 300);
      }
    }
  });
  
  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
  
  console.log('✅ Observer do modal PIX ativado (v5 - simplificada)!');
});
    </script>
    <!-- End Script Modal PIX -->
  </head>
  <body>
    <!-- Meta Pixel Noscript -->
    <noscript><img height="1" width="1" style="display:none" src="tr?id=1117613160187735&ev=PageView&noscript=1"></noscript>
    <div id="root"></div>
  </body>
</html>
